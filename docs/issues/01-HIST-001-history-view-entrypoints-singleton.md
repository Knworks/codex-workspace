---
id: `HIST-001`
title: `履歴ビュー起動導線と単一インスタンス制御`
status: Todo
---

# 🧾`HIST-001 履歴ビュー起動導線と単一インスタンス制御`

## 🎯背景/目的

- 会話履歴機能をユーザーが確実に起動できる導線を用意し、重複ビュー生成による操作混乱を防ぐ。

## 📌要件

- Codex Core の view/title に履歴ボタン（codicon: `history`）を追加する。
- コマンドパレットから履歴ビューを開くコマンドを追加する。
- 履歴ビューは WebviewPanel の単一インスタンスで管理し、再実行時は前面表示する。

## 🛠️スコープ / 作業内容

- `package.json` の command/menu 定義に履歴ビュー起動導線を追加する。
- 履歴ビュー用のパネルマネージャを実装し、作成済みパネルを再利用する。
- `extension.ts` のコマンド登録と破棄処理に履歴ビューを統合する。

## ✅AC（受け入れ基準）

- AC：必要十分な項目数（最低3、目安5〜10、上限なし）
  - [ ] [機能] Codex Core の履歴ボタン押下で履歴ビューがエディタ領域に表示される
  - [ ] [機能] コマンドパレット実行で同一の履歴ビューが表示される
  - [ ] [機能] 履歴ビュー表示中に再実行すると新規生成せず既存ビューが前面化される
  - [ ] [UI/UX] 履歴ボタンは Codex Core の既存ボタン配置を崩さず表示される
  - [ ] [テスト] 単一インスタンス制御とコマンド登録のテストが追加される

## 🔗依存関係

- DependsOn: なし

## 🧪テスト観点

- ユニット / 統合
- 検証方法：
  - コマンド登録有無、menu `when` 条件、再表示時のパネル再利用を検証する
