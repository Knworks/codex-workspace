---
id: `TEST-001`
title: `会話履歴機能のテスト追加`
status: Todo
---

# 🧾`TEST-001 会話履歴機能のテスト追加`

## 🎯背景/目的

- 仕様変更で追加される履歴機能の回帰を防ぎ、既存機能非影響を継続的に検証できる状態を作る。

## 📌要件

- 履歴ビュー起動導線、単一インスタンス、データ抽出、検索挙動のテストを追加する。
- 抽出対象外イベントが表示されないことを検証する。
- 既存 Explorer/同期機能の非回帰観点を追加する。

## 🛠️スコープ / 作業内容

- 履歴関連サービスのユニットテストを追加する。
- WebView 連携の統合テストを追加する。
- 既存テスト群に非回帰ケース（既存コマンド/ビュー表示）を追加する。

## ✅AC（受け入れ基準）

- AC：必要十分な項目数（最低3、目安5〜10、上限なし）
  - [ ] [機能] 履歴ボタン/コマンドの双方で履歴ビュー起動テストが通過する
  - [ ] [機能] 抽出対象が `user_message` と `task_complete.last_agent_message` のみに限定される
  - [ ] [機能] 検索実行とクリアで一覧状態が正しく遷移する
  - [ ] [UI/UX] ローカル時刻表示とテーマ追従ハイライトの確認ケースがある
  - [ ] [テスト] 既存 Explorer と同期機能の主要ケースに回帰がない

## 🔗依存関係

- DependsOn: HIST-001, HIST-002, HIST-003

## 🧪テスト観点

- ユニット / 統合 / E2E
- 検証方法：
  - CI で履歴関連テストと既存テストを同時実行し、非回帰を確認する
