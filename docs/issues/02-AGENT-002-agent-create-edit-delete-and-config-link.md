---
id: `AGENT-002`
title: `Agent追加編集削除とconfig連携`
status: Todo
---

# 🧾`AGENT-002 Agent追加編集削除とconfig連携`

## 🎯背景/目的

- Agent作成フローを整備し、ファイル作成と`config.toml`定義更新を同時に完了できるようにする。

## 📌要件

- Agent追加時に「名前入力→説明入力→テンプレート選択（空ファイル含む）」の順でウィザードを実行する。
- 作成先は `.codex/agents/<agent>.toml` とし、重複時は作成を中断して通知する。
- 作成成功時に `config.toml` へ `[agents.<agent>]`（`description` / `config_file`）を自動追記する。

## 🛠️スコープ / 作業内容

- Agent追加/編集/削除コマンドを実装する。
- テンプレート選択UIをAgent追加フローへ組み込み、空ファイル選択肢を追加する。
- `config.toml`追記処理を実装し、既存ブロック存在時は非上書きで通知する。
- Agent削除時の確認ダイアログと物理削除処理を実装する。

## ✅AC（受け入れ基準）

- AC：必要十分な項目数（最低3、目安5〜10、上限なし）
  - [ ] [機能] Agent追加で名前・説明・テンプレート選択の順に入力できる
  - [ ] [機能] 空ファイル選択時はテンプレート未適用で`.codex/agents/<agent>.toml`が作成される
  - [ ] [機能] テンプレート選択時はテンプレート内容が新規Agentファイルへ反映される
  - [ ] [状態/エラー] 同名Agentファイルが存在する場合は作成せず衝突通知される
  - [ ] [機能] 作成成功時に`config.toml`へ`[agents.<agent>]`が自動追記される
  - [ ] [状態/エラー] 既存`[agents.<agent>]`がある場合は上書きせず通知される
  - [ ] [テスト] 追加/編集/削除フローと`config.toml`追記のテストが追加される

## 🔗依存関係

- DependsOn: AGENT-001

## 🧪テスト観点

- (ユニット / リクエスト / 統合)
- 検証方法：
  - ウィザード入力順、重複時エラー、テンプレート適用、`config.toml`追記条件を確認する。
