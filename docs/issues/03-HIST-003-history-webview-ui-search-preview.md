---
id: `HIST-003`
title: `履歴WebView UIと検索プレビュー実装`
status: Todo
---

# 🧾`HIST-003 履歴WebView UIと検索プレビュー実装`

## 🎯背景/目的

- 履歴データを閲覧しやすい 2 ペイン UI で提示し、検索による対象セッションの特定を短時間で行えるようにする。

## 📌要件

- 左 30% / 右 70% の 2 ペイン UI を実装する。
- 左ペインに年/月/日ツリーとセッションカード、右ペインに会話プレビューを表示する。
- 検索はカードタイトルのみを対象に、明示実行で絞り込みとテーマ追従ハイライトを行う。

## 🛠️スコープ / 作業内容

- WebView の HTML/CSS/TS を実装し、2 ペインレイアウトとブロック区切り UI を構築する。
- カード選択時に `user_message` と最終回答を Markdown レンダリングして右ペインへ反映する。
- 検索ボタン/Enter 実行、クリア、ハイライト表示（VS Code テーマ色追従）を実装する。

## ✅AC（受け入れ基準）

- AC：必要十分な項目数（最低3、目安5〜10、上限なし）
  - [ ] [機能] 左ペインに年/月/日ツリーと新しい順のセッションカードが表示される
  - [ ] [機能] カード選択で右ペインの会話プレビューが更新される
  - [ ] [機能] 検索はボタン押下または Enter で実行され、クリアで解除される
  - [ ] [UI/UX] ハイライトが VS Code テーマ色に追従し可読性を維持する
  - [ ] [UI/UX] 会話ブロックが余白と薄い境界線で区切られて表示される
  - [ ] [テスト] WebView メッセージングと検索状態遷移のテストが追加される

## 🔗依存関係

- DependsOn: HIST-001, HIST-002

## 🧪テスト観点

- ユニット / E2E
- 検証方法：
  - WebView の初期描画、カード選択反映、検索実行/解除、ハイライト描画を確認する
